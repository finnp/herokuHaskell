<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Heist.SpliceAPI</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Heist-SpliceAPI.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">heist-0.13.1.2: An Haskell template system supporting both HTML5 and XML.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Heist.SpliceAPI</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An API implementing a convenient syntax for defining and manipulating splices.
This module was born from the observation that a list of tuples is
semantically ambiguous about how duplicate keys should be handled.
Additionally, the syntax is inherently rather cumbersome and difficult to work
with.  This API takes advantage of do notation to provide a very light syntax
for defining splices while at the same time eliminating the semantic ambiguity
of alists.
</p><p>Here's how you can define splices:
</p><pre> mySplices :: Splices Text
 mySplices = do
   &quot;firstName&quot; ## &quot;John&quot;
   &quot;lastName&quot;  ## &quot;Smith&quot;
</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span>  <a href="#t:SplicesM">SplicesM</a> s a = <a href="#v:SplicesM">SplicesM</a> {<ul class="subs"><li><a href="#v:unSplices">unSplices</a> :: <a href="file:///Users/finn/code/haskell/herokuHaskell/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/monads-tf-0.1.0.2/html/Control-Monad-State-Lazy.html#t:State">State</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s) a</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Splices">Splices</a> s = <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</li><li class="src short"><a href="#v:-35--35-">(##)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:-35--33-">(#!)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:-35--63-">(#?)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:noSplices">noSplices</a> ::  <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:runSplices">runSplices</a> ::  <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s</li><li class="src short"><a href="#v:splicesToList">splicesToList</a> ::  <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a -&gt; [(<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>, s)]</li><li class="src short"><a href="#v:add">add</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:mapS">mapS</a> ::  (a -&gt; b) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</li><li class="src short"><a href="#v:applyS">applyS</a> ::  a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> (a -&gt; b) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</li><li class="src short"><a href="#v:insertS">insertS</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</li><li class="src short"><a href="#v:insertWithS">insertWithS</a> ::  (s -&gt; s -&gt; s) -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a2 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</li><li class="src short"><a href="#v:unionWithS">unionWithS</a> ::  (s -&gt; s -&gt; s) -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a1 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a2 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</li><li class="src short"><a href="#v:-36--36-">($$)</a> ::  <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> (a -&gt; b) -&gt; a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</li><li class="src short"><a href="#v:mapNames">mapNames</a> ::  (<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</li><li class="src short"><a href="#v:prefixSplices">prefixSplices</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</li><li class="src short"><a href="#v:namespaceSplices">namespaceSplices</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:SplicesM" class="def">SplicesM</a> s a </p><div class="doc"><p>A monad providing convenient syntax for defining splices.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SplicesM" class="def">SplicesM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:unSplices" class="def">unSplices</a> :: <a href="file:///Users/finn/code/haskell/herokuHaskell/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/monads-tf-0.1.0.2/html/Control-Monad-State-Lazy.html#t:State">State</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s) a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:SplicesM" class="caption collapser" onclick="toggleSection('i:SplicesM')">Instances</p><div id="section.i:SplicesM" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s)</td><td class="doc"><p>Monoid instance does a union of the two maps with the second map
 overwriting any duplicates.
</p></td></tr><tr><td class="src"><a href="file:///Library/Haskell/ghc-7.6.3/lib/mtl-2.1.2/doc/html/Control-Monad-State-Class.html#t:MonadState">MonadState</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s) (<a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Splices" class="def">Splices</a> s = <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</p><div class="doc"><p>Convenient type alias that will probably be used most of the time.
</p></div></div><div class="top"><p class="src"><a name="v:-35--35-" class="def">(##)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>Forces a splice to be added.  If the key already exists, its value is
 overwritten.
</p></div></div><div class="top"><p class="src"><a name="v:-35--33-" class="def">(#!)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>Tries to add a splice, but if the key already exists, then it throws an
 error message.  This may be useful if name collisions are bad and you want
 to crash when they occur.
</p></div></div><div class="top"><p class="src"><a name="v:-35--63-" class="def">(#?)</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>Inserts into the map only if the key does not already exist.
</p></div></div><div class="top"><p class="src"><a name="v:noSplices" class="def">noSplices</a> ::  <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>A <code><a href="Heist-SpliceAPI.html#t:Splices">Splices</a></code> with nothing in it.
</p></div></div><div class="top"><p class="src"><a name="v:runSplices" class="def">runSplices</a> ::  <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s</p><div class="doc"><p>Runs the SplicesM monad, generating a map of splices.
</p></div></div><div class="top"><p class="src"><a name="v:splicesToList" class="def">splicesToList</a> ::  <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a -&gt; [(<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>, s)]</p><div class="doc"><p>Constructs an alist representation.
</p></div></div><div class="top"><p class="src"><a name="v:add" class="def">add</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/containers-0.5.0.0/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>Internal helper function for adding a map.
</p></div></div><div class="top"><p class="src"><a name="v:mapS" class="def">mapS</a> ::  (a -&gt; b) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</p><div class="doc"><p>Maps a function over all the splices.
</p></div></div><div class="top"><p class="src"><a name="v:applyS" class="def">applyS</a> ::  a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> (a -&gt; b) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</p><div class="doc"><p>Applies an argument to a splice function.
</p></div></div><div class="top"><p class="src"><a name="v:insertS" class="def">insertS</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> s</p><div class="doc"><p>Inserts a splice into the <code><a href="Heist-SpliceAPI.html#t:Splices">Splices</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:insertWithS" class="def">insertWithS</a> ::  (s -&gt; s -&gt; s) -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; s -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a2 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</p><div class="doc"><p>Inserts a splice with a function combining new value and old value.
</p></div></div><div class="top"><p class="src"><a name="v:unionWithS" class="def">unionWithS</a> ::  (s -&gt; s -&gt; s) -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a1 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s a2 -&gt; <a href="Heist-SpliceAPI.html#t:SplicesM">SplicesM</a> s ()</p><div class="doc"><p>Union of <code><a href="Heist-SpliceAPI.html#t:Splices">Splices</a></code> with a combining function.
</p></div></div><div class="top"><p class="src"><a name="v:-36--36-" class="def">($$)</a> ::  <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> (a -&gt; b) -&gt; a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> b</p><div class="doc"><p>Infix operator for <code>flip applyS</code>
</p></div></div><div class="top"><p class="src"><a name="v:mapNames" class="def">mapNames</a> ::  (<a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a>) -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</p><div class="doc"><p>Maps a function over all the splice names.
</p></div></div><div class="top"><p class="src"><a name="v:prefixSplices" class="def">prefixSplices</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</p><div class="doc"><p>Adds a prefix to the tag names for a list of splices.  If the existing
 tag name is empty, then the new tag name is just the prefix.  Otherwise the
 new tag name is the prefix followed by the separator followed by the
 existing name.
</p></div></div><div class="top"><p class="src"><a name="v:namespaceSplices" class="def">namespaceSplices</a> ::  <a href="file:///Library/Haskell/ghc-7.6.3/lib/text-0.11.3.1/doc/html/Data-Text-Internal.html#t:Text">Text</a> -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a -&gt; <a href="Heist-SpliceAPI.html#t:Splices">Splices</a> a</p><div class="doc"><p><code><a href="Heist-SpliceAPI.html#v:prefixSplices">prefixSplices</a></code> specialized to use a colon as separator in the style of
 XML namespaces.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>