<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>directory-tree-0.12.0: A simple directory-like tree datatype, with useful IO functions</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">directory-tree-0.12.0: A simple directory-like tree datatype, with useful IO functions</p></div><div id="content"><div id="description"><h1>directory-tree-0.12.0: A simple directory-like tree datatype, with useful IO functions</h1><div class="doc"><p>A simple directory-like tree datatype, with useful IO functions and Foldable and Traversable instance
</p><p>Provides a simple data structure mirroring a directory tree on the
filesystem, as well as useful functions for reading and writing
file and directory structures in the IO monad.
</p><p>Importing the library and optional (useful) Foldable and Traverable libraries:
</p><pre> import System.Directory.Tree
 import qualified Data.Foldable as F
 import qualified Data.Traversable as T
</pre><p>Write a hand-made directory tree of textfiles (strings) to the disk.
Simulates creating a new user Tux's home directory on a unix machine:
</p><pre> writeDirectory$ &quot;/home&quot; :/ Dir &quot;Tux&quot; [File &quot;README&quot; &quot;Welcome!&quot;]
</pre><p><a href="read.html">read</a> a directory by opening all the files at a filepath with readFile,
returning an 'AnchoredDirTree String' (d2). Then check for any IO failures:
</p><pre> do (base :/ d2) &lt;- readDirectory &quot;../parent_dir/dir2/&quot;
    let failed = anyFailed d2
    if failed then ...
</pre><p>Use Foldable instance function to concat a directory <code>dir</code> of text files into a
single file under the same directory:
</p><pre> do (b :/ dt) &lt;- readDirectory dir
    let f = F.concat dt
    return$ b :/ File &quot;ALL_TEXT&quot; f
</pre><p>Open all the files in the current directory as lazy bytestrings, ignoring
the base path in Anchored wrapper:
</p><pre> import qualified Data.ByteString.Lazy as B
 do (_ :/ dTree) &lt;- readDirectoryWith B.readFile &quot;./&quot;
</pre><p>This version also offers an experimental function <code>readDirectoryWithL</code> that does
lazy directory IO, allowing you to treat the returned <code>DirTree</code> as if it were a
normal lazily-generated data structure.
</p><p>For example, the following does only the amount of IO necessary to list the file
names of the children of the root directory, similar to <a href="ls /.html">ls /</a>:
</p><pre> do d &lt;- readDirectoryWithL readFile &quot;/&quot;
    mapM_ (putStrLn . name) $ contents $ free d
</pre><p>Any ideas or suggestions for improvements are most welcome :-)
</p><p><em>CHANGES</em>: from 0.11
</p><ul><li> export <code>transformDir</code> as requested
</li><li> add test suite to cabal file
</li><li> remove redundant <code>removeNonexistent</code> (thanks to dmwit for patch)
</li></ul></div></div><div id="module-list"><p class="caption">Modules</p><ul><li><span id="control.n.1" class="module collapser" onclick="toggleSection('n.1')">System</span><ul id="section.n.1" class="show"><li><span id="control.n.1.1" class="module collapser" onclick="toggleSection('n.1.1')">Directory</span><ul id="section.n.1.1" class="show"><li><span class="module"><a href="System-Directory-Tree.html">System.Directory.Tree</a></span></li></ul></li></ul></li></ul></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>